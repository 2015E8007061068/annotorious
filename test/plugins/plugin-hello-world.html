<html>
  <head>
    <title>Annotorious Hello World Plugin</title>
    <link rel="stylesheet" href="../../css/annotorious.css" type="text/css" />
    <script src="http://localhost:9810/compile?id=annotorious"></script>
    <script>
      // A Hello World Plugin
      annotorious.plugin.HelloWorld = function() { }

      annotorious.plugin.HelloWorld.prototype.initPlugin = function(anno) { }

      annotorious.plugin.HelloWorld.prototype.onPopupInit = function(popup) {
        popup.addField(function(annotation) {
          return '<em>Hello World: ' + annotation.text.length + '</em>';	
        });
      }

      annotorious.plugin.HelloWorld.prototype.onEditorInit = function(editor) {
        editor.addField('Hello World');
      }

      anno.addPlugin('HelloWorld', {});

      anno.addHandler('onAnnotationCreated', function(annotation) {
        alert(annotation.text);
      });
    </script>
  </head>

  <body>
    <img src="../image/640px-Hallstatt.jpg" id="hallstatt" class="annotatable">
    <input type="button" value="Add" onclick="addAnnotation();" />
    <input type="button" value="Remove" onclick="removeAnnotation();" />
    <input type="button" value="List" onclick="getAnnotations();" />
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut varius 
      diam posuere quam molestie vestibulum. Vestibulum non volutpat elit. Integer 
      vitae felis eget magna rutrum sagittis. Nulla facilisi. Praesent a consectetur
      velit. Cras eget nibh est, eu imperdiet mauris. Nulla quis justo urna. Sed eu
      rutrum mauris. Integer aliquet nulla sit amet ante mollis pellentesque.
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut varius 
      diam posuere quam molestie vestibulum. Vestibulum non volutpat elit. Integer 
      vitae felis eget magna rutrum sagittis. Nulla facilisi. Praesent a consectetur
      velit. Cras eget nibh est, eu imperdiet mauris. Nulla quis justo urna. Sed eu
      rutrum mauris. Integer aliquet nulla sit amet ante mollis pellentesque.
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut varius 
      diam posuere quam molestie vestibulum. Vestibulum non volutpat elit. Integer 
      vitae felis eget magna rutrum sagittis. Nulla facilisi. Praesent a consectetur
      velit. Cras eget nibh est, eu imperdiet mauris. Nulla quis justo urna. Sed eu
      rutrum mauris. Integer aliquet nulla sit amet ante mollis pellentesque.
    </p>
    <img class="annotatable" src="../image/371px-Claudius-Ptolemaeus.jpg">
    <script>
      // Some code demonstrating the anno.addAnnotation and 
      // anno.removeAnnotation API functions
      var annotation = {
         src: document.getElementById('hallstatt').src,
         text: "A dummy annotation",
         shape: {
           type: "Rectangle",
           geometry: {
             x: 100, y: 40, width:100, height: 50
           }
         }
      };

      function addAnnotation() {
       anno.addAnnotation(annotation);
      }

      function removeAnnotation() {
        anno.removeAnnotation(annotation);
      }

      function getAnnotations() {
        var annotations = anno.getAnnotations(document.getElementById('hallstatt').src);
        for (var i=0; i<annotations.length; i++) {
          console.log(annotations[i].text);
        }
      }
    </script>
  </body>
</html>
